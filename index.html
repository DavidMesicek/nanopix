<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NanoPix – Buy images instantly with POL (Polygon)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header">
    <h1 class="site-title">NanoPix</h1>
    <p class="site-subtitle">Buy images instantly with POL (Polygon)</p>
    <div class="header-actions">
      <div class="price-ticker" id="priceTicker">
        <span class="ticker-label">POL ≈</span>
        <span class="ticker-usd" id="tickerUsd">—</span>
        <span class="ticker-eur" id="tickerEur">—</span>
        <span class="ticker-stale" id="tickerStale"></span>
      </div>
      <button type="button" class="btn btn-wallet" id="connectWalletBtn">Connect Wallet</button>
      <span class="wallet-info" id="walletInfo"></span>
    </div>
  </header>

  <main class="main">
    <section class="gallery" id="gallery">
      <div class="gallery-grid" id="galleryGrid">
        <!-- Filled by JS -->
      </div>
    </section>
  </main>

  <div class="modal-overlay" id="modalOverlay" aria-hidden="true">
    <div class="modal" id="assetModal" role="dialog" aria-labelledby="modalTitle">
      <button type="button" class="modal-close" id="modalClose" aria-label="Close">&times;</button>
      <div class="modal-content" id="modalContent">
        <!-- Asset detail filled by JS -->
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.umd.min.js"></script>
  <!-- Buffer polyfill for Solana web3.js in browser -->
  <script>
  (function() {
    if (typeof window.Buffer !== 'undefined') return;
    function B(arg, encodingOrOffset, length) {
      if (!(this instanceof B)) return new B(arg, encodingOrOffset, length);
      if (typeof arg === 'number') {
        this._u = new Uint8Array(arg);
        if (encodingOrOffset !== undefined) this._u.fill(encodingOrOffset);
        return this;
      }
      if (typeof arg === 'string') {
        if (encodingOrOffset === 'hex') {
          var h = arg.replace(/^0x/, ''), bytes = [];
          for (var i = 0; i < h.length; i += 2) bytes.push(parseInt(h.substr(i, 2), 16));
          this._u = new Uint8Array(bytes);
        } else {
          this._u = new Uint8Array(arg.split('').map(function(c) { return c.charCodeAt(0); }));
        }
        return this;
      }
      if (arg instanceof Uint8Array) { this._u = arg; return this; }
      if (arg && arg.buffer instanceof ArrayBuffer) { this._u = new Uint8Array(arg); return this; }
      this._u = new Uint8Array(arg || 0);
      return this;
    }
    B.from = function(val, enc, len) {
      if (val instanceof Uint8Array) return new B(val);
      if (typeof val === 'string' && enc === 'hex') {
        var h = val.replace(/^0x/, ''), bytes = [];
        for (var i = 0; i < h.length; i += 2) bytes.push(parseInt(h.substr(i, 2), 16));
        return new B(new Uint8Array(bytes));
      }
      if (typeof val === 'string') return new B(val);
      if (val instanceof ArrayBuffer) return new B(new Uint8Array(val));
      if (val && val.buffer instanceof ArrayBuffer) return new B(new Uint8Array(val));
      return new B(val);
    };
    B.alloc = function(size, fill) {
      var b = new B(size);
      if (fill !== undefined) b._u.fill(fill);
      return b;
    };
    B.allocUnsafe = function(size) { return new B(size); };
    B.isBuffer = function(b) { return b && b._u instanceof Uint8Array; };
    B.prototype.slice = function(s, e) { var o = new B(this._u.slice(s, e)); return o; };
    B.prototype.reverse = function() {
      var u = this._u, i = 0, j = u.length - 1, t;
      while (i < j) { t = u[i]; u[i] = u[j]; u[j] = t; i++; j--; }
      return this;
    };
    B.prototype.toString = function(enc) {
      if (enc === 'hex') return Array.from(this._u).map(function(x) { return ('0' + x.toString(16)).slice(-2); }).join('');
      return String.fromCharCode.apply(null, this._u);
    };
    B.prototype.toJSON = function() { return { type: 'Buffer', data: Array.from(this._u) }; };
    Object.defineProperty(B.prototype, 'length', { get: function() { return this._u.length; } });
    Object.defineProperty(B.prototype, 'buffer', { get: function() { return this._u.buffer; } });
    window.Buffer = B;
    if (typeof global !== 'undefined') global.Buffer = B;
  })();
  </script>
  <script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.min.js"></script>
  <script src="app.js?v=3"></script>
</body>
</html>
